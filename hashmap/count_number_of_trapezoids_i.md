# Count Number of Trapezoids I

**난이도:** Medium (추정)  
**문제 링크:** (정보 없음)

## 문제 설명

2차원 평면상에 여러 개의 점 `points`가 주어집니다. 각 점은 `[x, y]` 좌표를 가집니다.

주어진 점들로 만들 수 있는 **사다리꼴(Trapezoid)**의 개수를 구하세요. 여기서 사다리꼴은 **x축에 평행한 두 변**을 가진 사각형으로 정의합니다. (즉, 밑변과 윗변이 x축과 평행해야 합니다.)

결과가 커질 수 있으므로 `10^9 + 7`로 나눈 나머지를 반환하세요.

## 제약 조건

- `points.length`는 최대 `1000` (추정)
- 좌표 값의 범위는 제한 없음 (하지만 해시맵을 사용하므로 크게 중요하지 않음)
- 중복된 점은 없다고 가정

## 예제

### 예제 1
**입력:** `points = [[0,0],[1,0],[2,0],[0,1],[1,1],[2,1]]`  
**출력:** `3`  
**설명:**
- y=0: [0,0], [1,0], [2,0]
- y=1: [0,1], [1,1], [2,1]
- 가능한 x좌표 쌍: (0,1), (0,2), (1,2)
- 각 쌍이 y=0과 y=1 두 곳에서 모두 등장하므로, 3개의 사다리꼴(또는 직사각형)이 형성됩니다.

## 솔루션

### 코드
```javascript
/**
 * @param {number[][]} points
 * @return {number}
 */
var countTrapezoids = function (points) {
    // 1. y좌표별로 점들을 그룹화
    const groupByY = {};
    for (const [x, y] of points) {
        if (!groupByY[y]) groupByY[y] = [];
        groupByY[y].push(x);
    }

    // 2. 각 y 레벨에서 가능한 모든 x좌표 쌍(x1 < x2)을 찾아 카운트
    // key: "x1,x2", value: 이 쌍이 등장한 y 레벨의 수
    const pairCount = new Map();

    for (const y in groupByY) {
        const xs = groupByY[y].sort((a, b) => a - b);

        for (let i = 0; i < xs.length - 1; i++) {
            for (let j = i + 1; j < xs.length; j++) {
                const key = `${xs[i]},${xs[j]}`;
                pairCount.set(key, (pairCount.get(key) || 0) + 1);
            }
        }
    }

    let answer = 0;
    const MOD = 1e9 + 7;

    // 3. 특정 (x1, x2) 쌍이 k개의 y 레벨에서 등장했다면,
    // 그 중 2개의 y 레벨을 선택하는 조합의 수만큼 사다리꼴이 생성됨: k * (k - 1) / 2
    for (const [, count] of pairCount) {
        if (count >= 2) {
            answer = (answer + (count * (count - 1)) / 2) % MOD;
        }
    }

    return answer;
};
```

### 접근 방법

**해시맵(HashMap)**을 사용하여 x축에 평행한 변을 공유하는 경우를 찾습니다.

1. **Y좌표 그룹화**: 사다리꼴의 두 평행한 변은 서로 다른 y좌표를 가지지만, x좌표 구간(`[x1, x2]`)은 동일해야 합니다. 따라서 먼저 점들을 y좌표별로 묶습니다.
2. **X구간 카운팅**: 각 y 레벨에서 가능한 모든 두 점의 쌍 `(x1, x2)`을 만듭니다. 이 쌍은 "길이와 위치가 정해진 선분"을 의미합니다.
3. **조합 계산**: 동일한 `(x1, x2)` 쌍이 `k`개의 서로 다른 y 레벨에서 발견된다면, 이 `k`개의 선분 중 아무거나 2개를 골라 연결하면 사다리꼴이 됩니다. 즉, `k`개 중 2개를 뽑는 경우의 수 `kC2`를 계산하여 더합니다.

**핵심 아이디어:** 사다리꼴을 구성하려면 **동일한 x좌표 쌍(`x1, x2`)**을 가진 **서로 다른 두 y좌표**가 필요합니다.

### 시간 복잡도
**`O(N²)`** (최악의 경우)

- `N`은 점의 개수입니다.
- 모든 점이 같은 y좌표에 있다면, 그 안에서 쌍을 만드는 데 `O(N²)`이 소요될 수 있습니다.
- 일반적인 경우, y좌표별로 점이 분산되어 있다면 더 빠를 수 있습니다.

### 공간 복잡도
**`O(N²)`**

- 최악의 경우 `pairCount` 맵에 저장되는 쌍의 개수가 `O(N²)`까지 늘어날 수 있습니다.
